{% extends 'base.html' %}

{% block title %}Checkout - Manus AI{% endblock %}

{% block content %}
<div class="container">
    <div class="row mb-4">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'home' %}">Início</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'local_businesses:business_dashboard' %}">Painel do Negócio</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'local_businesses:manage_plan' %}">Gerenciar Plano</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Checkout</li>
                </ol>
            </nav>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0"><i class="fas fa-credit-card me-2"></i>Finalizar Pagamento</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-8">
                            <h4>Detalhes do Pagamento</h4>
                            <form method="post">
                                {% csrf_token %}
                                <div class="mb-3">
                                    <label for="plan_type" class="form-label">Plano Selecionado</label>
                                    <input type="text" class="form-control" id="plan_type" value="{{ billing_plan.name }}" readonly>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="amount" class="form-label">Valor</label>
                                    <input type="text" class="form-control" id="amount" value="R$ {{ billing_plan.price|floatformat:2 }}" readonly>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="payment_method" class="form-label">Método de Pagamento</label>
                                    <select class="form-select" id="payment_method" name="payment_method" required>
                                        <option value="">Selecione um método de pagamento</option>
                                        <option value="credit_card">Cartão de Crédito</option>
                                        <option value="debit_card">Cartão de Débito</option>
                                        <option value="bank_transfer">Transferência Bancária</option>
                                        <option value="pix">PIX</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="card_number" class="form-label">Número do Cartão</label>
                                    <input type="text" class="form-control" id="card_number" name="card_number" placeholder="0000 0000 0000 0000" required>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="expiry_date" class="form-label">Data de Validade</label>
                                        <input type="text" class="form-control" id="expiry_date" name="expiry_date" placeholder="MM/AA" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="cvv" class="form-label">CVV</label>
                                        <input type="text" class="form-control" id="cvv" name="cvv" placeholder="123" required>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="cardholder_name" class="form-label">Nome do Titular</label>
                                    <input type="text" class="form-control" id="cardholder_name" name="cardholder_name" placeholder="Nome como está no cartão" required>
                                </div>
                                
                                <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                    <a href="{% url 'local_businesses:manage_plan' %}" class="btn btn-secondary me-md-2">
                                        <i class="fas fa-arrow-left me-1"></i>Cancelar
                                    </a>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-lock me-1"></i>Processar Pagamento
                                    </button>
                                </div>
                            </form>
                        </div>
                        
                        <div class="col-lg-4">
                            <div class="card border-secondary">
                                <div class="card-header bg-secondary text-white">
                                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Resumo do Pedido</h5>
                                </div>
                                <div class="card-body">
                                    <h6>{{ billing_plan.name }}</h6>
                                    <ul class="list-unstyled">
                                        <li>R$ {{ billing_plan.price|floatformat:2 }} / mês</li>
                                        <li>{{ billing_plan.credits_per_month }} créditos mensais</li>
                                    </ul>
                                    <hr>
                                    <div class="d-flex justify-content-between">
                                        <strong>Total:</strong>
                                        <strong>R$ {{ billing_plan.price|floatformat:2 }}</strong>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card border-success mt-3">
                                <div class="card-header bg-success text-white">
                                    <h5 class="mb-0"><i class="fas fa-shield-alt me-2"></i>Segurança</h5>
                                </div>
                                <div class="card-body">
                                    <p class="mb-0">
                                        <i class="fas fa-lock me-1"></i> Todos os pagamentos são processados com segurança SSL.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}